<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:client="http://www.aihat.net/client">
<ui:composition>
	<table cellspacing="0" class="dataTable" style="width: 60%">
		<thead>
			<tr class="style012">
				<td align="center">
					<h:selectBooleanCheckbox styleClass="selectHeader" onchange="selectOnChange_header(this, '#{formId}', 'selectClipCheckBox')"/>
				</td>
				<td colspan="2">
					<h:outputText value="#{msg.client_clips_info}"/>
				</td>
				<td>
					<h:outputText value="#{msg.client_clips_singer}"/>
				</td>
				<td>
					<h:outputText value="#{msg.client_clips_composer}"/>
				</td>
				<td>
					<h:outputText value="#{msg.client_clips_genre}"/>
				</td>
				<td>
					<h:outputText value="#{msg.client_clips_uploader}"/>
				</td>
			</tr>
		</thead>
		<c:forEach var="aClip" items="#{clips}">
			<tr class="odd-line" onmouseover="oddEventMouseOver(this)" onmouseout="oddEventMouseOut(this)">
				<td rowspan="2" class="nohover" align="center">
					<table cellpadding="0" cellspacing="0">
						<tr>
							<td>
								<h:commandButton styleClass="style013 up" rendered="#{orderInPlaylistChangable}">
									<f:param name="clipId" value="#{aClip.id}"/>
									<f:param name="orderChangedBy" value="-1"/>
									<f:ajax event="click" render="@form" listener="#{detailBean.changeClipOrderInPlaylist}"/>
								</h:commandButton>
							</td>
						</tr>
						<tr>
							<td class="nohover">
								<h:selectBooleanCheckbox id="selectClipCheckBox" value="#{aClip.selectedInDataTable}" styleClass="selectClipCheckBox"
									onchange="selectOnChange_item('#{formId}', 'selectHeader', 'selectClipCheckBox')"/>
							</td>
						</tr>
						<tr>
							<td>
								<h:commandButton styleClass="style013 down" rendered="#{orderInPlaylistChangable}">
									<f:param name="clipId" value="#{aClip.id}"/>
									<f:param name="orderChangedBy" value="1"/>
									<f:ajax event="click" render="@form" listener="#{detailBean.changeClipOrderInPlaylist}"/>
								</h:commandButton>
							</td>
						</tr>
					</table>
				</td>
				<td rowspan="2" class="nohover" >
					<h:commandLink onclick="slideToFeaturedClips(); updateCurrentPlaybackPos();">
						<f:param name="selectedClipId" value="#{aClip.id}"/>
						<f:ajax event="click" execute=":featuredClips" render=":featuredClips" listener="#{featuredClipsBean.playOne}"/>
						<h:graphicImage url="#{aClip.thumbnailLink}" height="62"/>
					</h:commandLink>
				</td>
				<td>
					<h:panelGrid columns="2">
						<h:commandLink onclick="slideToFeaturedClips(); updateCurrentPlaybackPos();">
							<f:param name="selectedClipId" value="#{aClip.id}"/>
							<f:ajax event="click" execute=":featuredClips" render=":featuredClips" listener="#{featuredClipsBean.playOne}"/>
							<h:outputText value="#{aClip.title}" style="color:#1d1d1d"/>
						</h:commandLink>
						<h:graphicImage url="#{config.server}/img/client/hd.png" rendered="#{aClip.official}"/>
					</h:panelGrid>
					
				</td>
				<td>
					<ui:repeat var="aSinger" value="#{aClip.singers}">
						<h:commandLink onclick="slideToDetail();" styleClass="style014">
							<f:param name="singerId" value="#{aSinger.id}"/>
							<f:ajax event="click" execute="@form" render=":detail" listener="#{detailBean.showSingerDetail}"/>
							<h:outputText value="#{aSinger.name}"/>
							<h:outputText value="(#{msg.CU0021})" rendered="#{aSinger.followed}"/>
						</h:commandLink>
						<br/>
					</ui:repeat>
				</td>
				<td>
					<ui:repeat var="aComposer" value="#{aClip.composers}">
						<h:commandLink value="#{aComposer.name}" onclick="slideToDetail();" styleClass="style014">
							<f:param name="composerId" value="#{aComposer.id}"/>
							<f:ajax event="click" execute="@form" render=":detail" listener="#{detailBean.showComposerDetail}"/>
						</h:commandLink>
						<br/>
					</ui:repeat>
				</td>
				<td>
					<ui:repeat var="aGenre" value="#{aClip.genres}">
						<h:commandLink value="#{aGenre.nameEn}"	rendered="#{utilsBean.currentLanguage eq 'en'}" onclick="slideToDetail();" styleClass="style014">
							<f:param name="genreId" value="#{aGenre.id}"/>
							<f:ajax event="click" execute="@form" render=":detail" listener="#{detailBean.showGenreDetail}"/>
						</h:commandLink>
						<h:commandLink value="#{aGenre.nameVi}" rendered="#{utilsBean.currentLanguage eq 'vi'}" onclick="slideToDetail();" styleClass="style014">
							<f:param name="genreId" value="#{aGenre.id}"/>
							<f:ajax event="click" execute="@form" render=":detail" listener="#{detailBean.showGenreDetail}"/>
						</h:commandLink>
						<br/>
					</ui:repeat>
				</td>
				<td>
					<h:commandLink onclick="slideToDetail();">
						<f:param name="userId" value="#{aClip.user.id}"/>
						<f:ajax event="click" execute="@form" render=":detail" listener="#{detailBean.showUserDetail}"/>
						<h:outputText value="#{aClip.user.name}" styleClass="style014"/>
						<h:outputText value="(#{msg.CU0021})" rendered="#{aClip.user.followed}"/>
					</h:commandLink>
				</td>
			</tr>
			<tr class="even-line" onmouseover="oddEventMouseOver(this)" onmouseout="oddEventMouseOut(this)">
				<td colspan="5">
					<table cellspacing="0" style="width: 100%">
						<tr>
							<td>
								<h:outputText value="#{aClip.nFans} #{msg.client_clips_peopleLiked}" styleClass="style015"/>
							</td>
							<td>
								<h:outputText value="#{aClip.nViews} #{msg.client_clips_peopleViewed}" styleClass="style015"/>
							</td>
							<td style="float: right;">
								<h:commandButton value="+" onclick="slideToFeaturedClips();updateCurrentPlaybackPos();">
									<f:param name="selectedClipId" value="#{aClip.id}"/>
									<f:param name="referenceBeanName" value="#{bean.beanName}"/>
									<f:ajax event="click" execute=":featuredClips" render=":featuredClips" listener="#{featuredClipsBean.addOne}"/>
								</h:commandButton>
							</td>
							<td style="float: right;">
								<h:commandButton value="like" rendered="#{userProfileBean.loggedIn and not aClip.liked}">
									<f:param name="clipId" value="#{aClip.id}"/>
									<f:param name="referenceBeanName" value="#{bean.beanName}"/>
									<f:ajax event="click" render="@form" listener="#{zentaiBean.likeClip}"/>
								</h:commandButton>
							</td>
							<td style="float: right;">
								<h:commandButton value="unlike" rendered="#{userProfileBean.loggedIn and aClip.liked}">
									<f:param name="clipId" value="#{aClip.id}"/>
									<f:param name="referenceBeanName" value="#{bean.beanName}"/>
									<f:ajax event="click" render="@form" listener="#{zentaiBean.unlikeClip}"/>
								</h:commandButton>
							</td>
							<td style="float: right;">
								<h:commandButton value="Link" onclick="alert('#{config.server}/pages/client/Zentai.jsf?perlink_clipid=#{aClip.id}');return false;"/>
							</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td style="height:10px"></td>
			</tr>
		</c:forEach>
	</table>
	<script>
		selectOnChange_item('#{formId}', 'selectHeader', 'selectClipCheckBox');
	</script>
</ui:composition>
</html>